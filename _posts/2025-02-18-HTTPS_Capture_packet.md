---
layout: post
title: "HTTPS密文抓包"
date:   2025-02-18
tags: [cdn]
comments: true
author: xingsong
toc: true
---

在我们日常工作中，经常需要抓包分析各种异常的网络常见。http是网络常见中最常见的一种，随着https的普及，我们生产环境中，大部分都为https的网站。而https所有的交互数据都是经过加密的。

<!-- more -->

# 概述

1. https的核心原理并不复杂，通过非对称加密传递密钥，然后拿这个密钥通过对称加密传递密文数据。
2. tls1.2原理简单点，通过客户端随机数，服务端随机数，以及预主密钥生成主密钥，然后通过主密钥加密数据。所以tls1.2版本中，我们只要知道了主密钥，就能解密数据。
3. tls1.3复杂许多，支持更多密钥和更多密钥交换方式
4. 其实，无论原理如何，我们作为使用方，解密明文数据其实很简单，主要分为两个过程：
  - 记录密钥日志，抓取数据包
  - 在wireshark中导入密钥日志，打开抓取的数据包即可。